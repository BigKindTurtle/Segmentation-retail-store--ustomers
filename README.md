Описание проекта
Настоящая работа представляет собой кейс продвижения розничной сети магазинов продуктов питания с собственной торговой маркой продукции, стремящейся повысить уровень клиентской лояльности посредством внедрения соответствующей программы. 
Розничная сеть принадлежит крупному агропромышленному холдингу, производящему продукты питания преимущественно мясного направления и ориентированного на массовый сегмент потребителей. Холдинг активно развивает собственную розничную сеть, включающую на сегодня около 200 магазинов формата «у дома», при этом предлагающих ограниченный ассортимент товаров с преобладанием собственных торговых марок.
Цель исследования
Поддержка команды проекта компании в разработке эффективной программы лояльности путем:
Идентификации ключевых групп покупателей, формирующих наибольшую долю доходаhttps://github.com/BigKindTurtle/Segmentation-retail-store--ustomers/tree/main
Прогнозирования оттока клиентов
Персонализации предложений по различным сегментам аудитории
Оптимизации ассортимента
Анализа временных закономерностей потребительских покупок
Исходные данные
Данные представляют собой выборочную выгрузку из бухгалтерского программного комплекса 1С, содержащую:
Сведения по приблизительно 10 магазинам
Более 2000 зарегистрированных пользователей карты лояльности
Период наблюдения: 2024—2025 годы
Структура исходных данных
ПолеОписание
client_idУникальный идентификатор клиента, совершившего покупку
purchase_datetimeДата и время совершения покупки
store_nameНазвание магазина, где была совершена покупка
product_nameНазвание приобретенного товара
quantityКоличество купленного товара
priceЦена за единицу товара (без учета скидки)
discountВеличина скидки на товар (может быть выражена в процентах или абсолютных значениях)
is_weightedФлаг, указывающий, является ли товар взвешиваемым (True/False)
weight_kgВес товара в килограммах (актуально только для взвешиваемых товаров)
price_per_kgЦена товара за килограмм (для взвешиваемых продуктов)
is_foodФлаг, обозначающий, относится ли продукт к категории пищевых товаров (True/False)
is_own_brandПризнак принадлежности продукта собственной торговой марке сети магазинов (True/False)

Методология
Первоначально используемый набор метрик является простым и детально исследованным действующей командой аналитиков компании. Однако вследствие особенностей деятельности конкретной бизнес-модели указанный набор данных признан недостаточно информативным. Причиной этому служит узкий ассортимент продукции и доминирование товаров собственного производства на торговых площадях, что затрудняет объективную оценку покупательского поведения исключительно по данным кассового чека.
В работе проводится классификация метрик чека, исследование их информативности методами машинного обучения и проверка предположения аналитиков о невысокой ценности данных. Для углубленного анализа создан класс MetricsCalculator, который рассчитывает индивидуальные показатели для каждого клиента.
Расчетные метрики
A. Частота покупок (RFM)
purchase_frequency — количество уникальных дней совершения покупок
recency_days — количество дней с момента последней покупки
transaction_count — общее число совершенных транзакций
purchase_interval_mean — среднее значение интервалов между покупками
purchase_interval_std — стандартное отклонение интервалов между покупками
B. Денежные показатели
total_spending — общий объем расходов клиента
avg_receipt_value — средняя сумма чека
receipt_value_std — стандартное отклонение суммы чека
spending_trend — динамика изменений расходов (коэффициент линейной регрессии)
C. Показатели лояльности к брендам холдинга
own_brand_percentage — процент покупок продукции холдинга (% от общего числа позиций)
own_brand_spending_share — доля затрат на продукцию холдинга (% от общих расходов)
own_brand_loyalty_trend — изменения предпочтений клиентов относительно брендов холдинга (сравнение первой и второй половины периода наблюдения)
D. Показатели разнообразия ассортимента
category_diversity — количество уникальных товарных категорий
product_diversity_index — индекс энтропии Шеннона (разнообразие приобретаемых продуктов)
herfindahl_concentration — индекс Херфиндаля-Хиршмана (уровень концентрации покупок среди отдельных продуктовых групп)
E. Временные паттерны поведения покупателей
shopping_morning — процент утренних покупок
shopping_afternoon — процент дневных покупок
shopping_evening_pct — процент вечерних покупок
weekend_shopping_pct — доля покупок, совершённых в выходные дни
days_of_week_diversity — степень равномерности распределения покупок по дням недели
F. Поведенческие характеристики
stores_visited — количество разных торговых точек, посещённых клиентом
main_store_loyalty — доля покупок, сделанных в основной торговой точке (% от всех покупок)
discount_participation_rate — частота участия покупателя в акциях со скидками (% покупок со скидкой)
basket_size_cv — коэффициент вариации среднего размера покупательской корзины
Использование
Для расчета метрик используйте класс MetricsCalculator, который обрабатывает исходные данные и генерирует индивидуальные показатели для каждого клиента.
